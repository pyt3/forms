<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-control" content="no-cache , no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Truck Booking</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"
        integrity="sha512-pumBsjNRGGqkPzKHndZMaAG+bir374sORyzM3uulLV14lN5LyykqNk8eEeUlUkB3U0M4FApyaHraT65ihJhDpQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt&display=swap" rel="stylesheet">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css">
    <link href="https://cdn.datatables.net/v/bs5/dt-1.13.8/date-1.5.1/fh-3.4.0/r-2.5.0/datatables.min.css"
        rel="stylesheet">

    <script src="https://cdn.datatables.net/v/bs5/dt-1.13.8/date-1.5.1/fh-3.4.0/r-2.5.0/datatables.min.js"></script>
    <!-- set icon -->
    <link rel="icon" href="./4wheels.png" type="image/png" sizes="16x16">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Prompt', sans-serif;
            height: 100%;
        }

        .btn-check:checked+.btn,
        .btn.active,
        .btn.show,
        .btn:first-child:active,
        :not(.btn-check)+.btn:active {
            color: #fff;
            background-color: #0d6fff;
            border-color: #0d6fff;
        }

        .alert-invalidate {
            border-color: var(--bs-form-invalid-border-color);
            padding-right: calc(1.5em + .75rem);
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right calc(.375em + .1875rem) top calc(.375em + .1875rem);
            background-size: calc(.75em + .375rem) calc(.75em + .375rem);
        }

        .alert-validated {
            border-color: var(--bs-form-valid-border-color);
            padding-right: calc(1.5em + .75rem);
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right calc(.375em + .1875rem) top calc(.375em + .1875rem);
            background-size: calc(.75em + .375rem) calc(.75em + .375rem);
        }

        .img-thumbnail {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: unset;
            object-fit: cover;
            min-height: 200px;
        }

        input[type="time"]:focus {
            border-color: #d1e7dd;
        }

        .form-control-time {
            display: block;
            width: 100%;
            padding: .375rem .75rem;
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: var(--bs-body-color);
            background-color: var(--bs-body-bg);
            background-clip: padding-box;
            border: var(--bs-border-width) solid var(--bs-border-color);
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: var(--bs-border-radius);
            transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
        }

        .form-control-time-sm {
            min-height: calc(1.5em + .5rem + calc(var(--bs-border-width) * 2));
            padding: .25rem .5rem;
            font-size: .875rem;
            border-radius: var(--bs-border-radius-sm);
        }

        @keyframes blink {
            0% {
                border-width: 0.125rem;
                /* 2px / 16px */
            }

            33% {
                border-width: 0.1875rem;
                /* 3px / 16px */
            }

            66%,
            100% {
                border-width: 0.25rem;
                /* 4px / 16px */
            }
        }

        @media (max-width: 576px) {
            .offcanvas {
                width: 100% !important
            }
        }

        @media (min-width: 577px) {
            .offcanvas {
                width: 50vw !important
            }
        }

        .pac-container {
            z-index: 999999;
        }

        /*  Toggle Switch  */

        .toggleSwitch span span {
            display: none;
        }

        .toggleSwitch {
            display: inline-block;
            height: 18px;
            position: relative;
            overflow: visible;
            padding: 0;
            cursor: pointer;
            width: 200px;
            background-color: #fafafa;
            border: 1px solid #ccc;
            border-radius: 50px;
            height: 34px;
        }

        .toggleSwitch * {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }

        .toggleSwitch label,
        .toggleSwitch>span {
            line-height: 20px;
            height: 20px;
            vertical-align: middle;
            border-radius: 50px
        }

        .toggleSwitch input:focus~a,
        .toggleSwitch input:focus+label {
            outline: none;
        }

        .toggleSwitch label {
            position: relative;
            z-index: 3;
            display: block;
            width: 100%;
        }

        .toggleSwitch input {
            position: absolute;
            opacity: 0;
            z-index: 5;
            border-radius: 50px
        }

        .toggleSwitch>span {
            position: absolute;
            left: 0;
            width: calc(100% - 6px);
            margin: 0;
            text-align: left;
            white-space: nowrap;
            margin: 0 3px;
        }

        .toggleSwitch>span span {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 5;
            display: block;
            width: 50%;
            margin-left: 50px;
            text-align: left;
            font-size: 0.9em;
            width: auto;
            left: 0;
            top: -1px;
            opacity: 1;
            width: 40%;
            text-align: center;
            line-height: 34px;
        }

        .toggleSwitch a {
            position: absolute;
            right: 50%;
            z-index: 4;
            display: block;
            top: 3px;
            bottom: 3px;
            padding: 0;
            left: 3px;
            width: 50%;
            background-color: #666;
            border-radius: 4px;
            -webkit-transition: all 0.2s ease-out;
            -moz-transition: all 0.2s ease-out;
            transition: all 0.2s ease-out;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .toggleSwitch>span span:first-of-type {
            color: #FFF;
            opacity: 1;
            left: 0;
            margin: 0;
            width: 50%;
        }

        a:not([href]):not([class]),
        a:not([href]):not([class]):hover {
            color: inherit;
            text-decoration: none;
            border-radius: 50px;
            background: #dc3545;
        }

        .toggleSwitch>span span:last-of-type {
            left: auto;
            right: 0;
            color: #999;
            margin: 0;
            width: 50%;
        }

        .toggleSwitch>span:before {
            content: '';
            display: block;
            width: 100%;
            height: 100%;
            position: absolute;
            left: 0;
            top: -2px;
            /* background-color: #fafafa;
      border: 1px solid #ccc; */
            border-radius: 30px;
            -webkit-transition: all 0.2s ease-out;
            -moz-transition: all 0.2s ease-out;
            transition: all 0.2s ease-out;
        }

        .toggleSwitch input:checked~a {
            left: calc(50% - 3px);
            border-radius: 50px;
            background: #07c160;
        }

        .toggleSwitch input:checked~span:before {
            /* border-color: #0097D1;
      box-shadow: inset 0 0 0 30px #0097D1; */
        }

        .toggleSwitch input:checked~span span:first-of-type {
            left: 0;
            color: #999;
        }

        .toggleSwitch input:checked~span span:last-of-type {
            /* opacity: 1;
      color: #fff;	 */
            color: #FFF;
        }

        /* Switch Sizes */
        .toggleSwitch.large {
            width: 60px;
            height: 27px;
        }

        .toggleSwitch.large a {
            width: 27px;
        }

        .toggleSwitch.large>span {
            height: 29px;
            line-height: 28px;
        }

        .toggleSwitch.large input:checked~a {
            left: 41px;
        }

        .toggleSwitch.large>span span {
            font-size: 1.1em;
        }

        .toggleSwitch.large>span span:first-of-type {
            left: 50%;
        }

        .toggleSwitch.xlarge {
            width: 80px;
            height: 36px;
        }

        .toggleSwitch.xlarge a {
            width: 36px;
        }

        .toggleSwitch.xlarge>span {
            height: 38px;
            line-height: 37px;
        }

        .toggleSwitch.xlarge input:checked~a {
            left: 52px;
        }

        .toggleSwitch.xlarge>span span {
            font-size: 1.4em;
        }

        .toggleSwitch.xlarge>span span:first-of-type {
            left: 50%;
        }

        /*  End Toggle Switch  */
    </style>
</head>

<body class="bg-primary-subtle">
    <nav class="navbar bg-body-tertiary d-none">
        <div class="container-fluid d-flex justify-content-between">
            <a class="navbar-brand" href="#">
                <img src="./4wheels.png" alt="Logo" width="30" height="24" class="d-inline-block align-text-top">
                Member
            </a>
            <button class="btn btn-outline-primary" type="button" data-bs-toggle="modal" data-bs-target="#menu-modal"
                id="check-status-btn" style="display: none;">
                <i class="bi bi-list"></i>
                ตรวจสอบสถานะการจอง
        </div>
    </nav>
    <header class="mt-3 container-fluid">
        <div class="row justify-content-center px-2">
            <div class="col-auto rounded py-3 px-3 bg-white shadow border border-2 border-primary">
                <span class="h3 fw-bold">
                    <img width="50" height="50" src="./icons8-truck.gif" />
                    <span id="form-header">
                        Truck Booking
                    </span>
                </span>
            </div>
        </div>
    </header>
    <main>
        <form
            class="mt-3 container-fluid d-none flex-column justify-content-center align-items-center gap-2 main needs-validation"
            novalidate>
            <section class="col-12 col-md-6 m-0 p-0" id="select-options-sec">
                <div class="row g-3 needs-validation pb-5 mb-5" id="select-options-form" novalidate>
                    <div class="col-12">
                        <div class="d-flex flex-column text-bg-light rounded shadow p-2">
                            <label class="mt-3 ms-3 fw-bold">เลือกประเภทรถบรรทุก</label>
                            <div class="d-flex p-2">
                                <div class="col-6 pe-2 d-flex flex-stretch">
                                    <input type="radio" class="btn-check" name="truck-type" id="4wheels"
                                        autocomplete="off" value="รถ 4 ล้อ" required>
                                    <label
                                        class="btn btn-outline-secondary border border-2 w-100 d-flex justify-content-center align-items-center shadow-sm"
                                        for="4wheels">
                                        รถ 4 ล้อ</label>
                                </div>
                                <div class="col-6 ps-2 d-flex flex-stretch">
                                    <input type="radio" class="btn-check" name="truck-type" id="6wheels"
                                        autocomplete="off" value="รถ 6 ล้อ" required>
                                    <label
                                        class="btn btn-outline-secondary border border-2 w-100 d-flex justify-content-center align-items-center shadow-sm"
                                        for="6wheels">รถ 6 ล้อ</label>
                                </div>
                            </div>
                            <div class="invalid-feedback text-end truck-type-invalid-feedback">
                                กรุณาเลือกประเภทรถบรรทุก
                            </div>
                        </div>

                    </div>
                    <div class="col-12" id="truck-sub-type-div" style="display: none;">
                        <div class="d-flex flex-column text-bg-light rounded shadow p-2">
                            <label class="mt-3 ms-3 fw-bold">เลือกรูปแบบรถบรรทุก</label>
                            <div class="d-flex flex-column gap-3 p-2">
                                <div class="col-12 d-flex flex-stretch">
                                    <input type="radio" class="btn-check 4wheels" name="truck-sub-type" id="4wheels-box"
                                        autocomplete="off" value="4 ล้อ ตู้ทึบ" required>
                                    <label
                                        class="btn btn-outline-secondary border border-2 w-100 d-flex justify-content-start align-items-start shadow-sm flex-column"
                                        for="4wheels-box">
                                        <span class="badge rounded-pill text-bg-warning my-2" style="font-size: 1rem;">4
                                            ล้อ
                                            ตู้ทึบ</span>
                                        <div style="font-size: smaller;" class="text-start d-flex flex-column">
                                            <span>รับน้ำหนัก 2.50 ตัน</span>
                                            <span>พื้นที่บรรทุก (ก) 1.50 x (ย) 1.75 x (ส) 2.10 เมตร</span>
                                            <span>ประกันสินค้าระหว่างขนส่ง 100,000 บาท/เที่ยว</span>
                                            </span>
                                        </div>
                                    </label>
                                </div>
                                <div class="col-12 d-flex flex-stretch">
                                    <input type="radio" class="btn-check 4wheels" name="truck-sub-type"
                                        id="4wheels-jumbo-box" autocomplete="off" value="4 ล้อ จัมโบ้ ตู้ทึบ" required>
                                    <label
                                        class="btn btn-outline-secondary border border-2 w-100 d-flex justify-content-start align-items-start shadow-sm flex-column"
                                        for="4wheels-jumbo-box">
                                        <span class="badge rounded-pill text-bg-warning my-2" style="font-size: 1rem;">4
                                            ล้อ
                                            จัมโบ้ ตู้ทึบ</span>
                                        <div style="font-size: smaller;" class="text-start d-flex flex-column">
                                            <span>รับน้ำหนัก 2.70 ตัน</span>
                                            <span>ขนาดพื้นที่บรรทุก (ก) 1.80 x (ย) 1.80 x (ส) 2.80 เมตร</span>
                                            <span>ประกันสินค้าระหว่างขนส่ง 100,000 บาท/เที่ยว</span>
                                            </span>
                                        </div>
                                    </label>
                                </div>

                                <div class="col-12 d-flex flex-stretch">
                                    <input type="radio" class="btn-check 6wheels" name="truck-sub-type" id="6wheels-box"
                                        autocomplete="off" value="6 ล้อ ตู้ทึบ" required>
                                    <label
                                        class="btn btn-outline-secondary border border-2 w-100 d-flex justify-content-start align-items-start shadow-sm flex-column"
                                        for="6wheels-box">
                                        <span class="badge rounded-pill text-bg-warning my-2" style="font-size: 1rem;">6
                                            ล้อ
                                            ตู้ทึบ</span>
                                        <div style="font-size: smaller;" class="text-start d-flex flex-column">
                                            <span>รับน้ำหนัก 5.00 ตัน</span>
                                            <span>พื้นที่บรรทุก (ก) 2.30 x (ย) 5.50 x (ส) 2.30 เมตร</span>
                                            <span>ประกันสินค้าระหว่างขนส่ง 300,000 บาท/เที่ยว</span>
                                        </div>
                                    </label>
                                </div>
                                <div class="invalid-feedback text-end truck-sub-type-invalid-feedback">
                                    กรุณาเลือกรูปแบบรถบรรทุก
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12" id="truck-num-div" style="display: none;">
                        <div class="d-flex flex-column text-bg-light rounded shadow p-2">
                            <label class="mt-3 ms-3 fw-bold">ระบุจำนวนรถ (คัน)</label>
                            <div class="d-flex flex-column gap-3 p-2">
                                <!-- <input type="number" class="form-control text-center" placeholder="จำนวนรถ"
                                        inputmode="numeric" id="truck-num" name="truck-num" pattern="[0-9]*" min="1" required> -->
                                <select class="form-select" aria-label="Default select example" id="truck-num"
                                    name="truck-num" required>
                                    <option value="1" selected>1 คัน</option>
                                    <option value="2">2 คัน</option>
                                    <option value="3">3 คัน</option>
                                    <option value="4">4 คัน</option>
                                    <option value="5">5 คัน</option>
                                    <option value="6">6 คัน</option>
                                    <option value="7">7 คัน</option>
                                    <option value="8">8 คัน</option>
                                    <option value="9">9 คัน</option>
                                    <option value="10">10 คัน</option>
                                </select>
                                <div class="invalid-feedback text-end truck-num-invalid-feedback">
                                    กรุณาระบุจำนวนรถ
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12" id="labor-need-div" style="display: none;">
                        <div class="d-flex flex-column text-bg-light rounded shadow p-2">
                            <label class="mt-3 ms-3 fw-bold">แรงงาน</label>
                            <div class="d-flex flex-column gap-3 p-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="labor-need">
                                    <label class="form-check-label" for="labor-need">
                                        ต้องการแรงงาน (+500 บาท/คน)
                                    </label>
                                </div>
                                <div class="col" style="display: none;">
                                    <label for="labor-num" class="form-label">ระบุจำนวนแรงงานที่ต้องการ</label>
                                    <!-- <input type="number" class="form-control text-center" placeholder="จำนวนคน"
                                            inputmode="numeric" id="labor-num" name="labor-num" pattern="[0-9]*" min="1"> -->
                                    <select class="form-select" aria-label="Default select example" id="labor-num"
                                        name="labor-num">
                                        <option value="1" selected>1 คน (คนขับ)</option>
                                        <option value="2">2 คน (คนขับ + ผู้ช่วย 1 คน)</option>
                                        <option value="3">3 คน (คนขับ + ผู้ช่วย 2 คน)</option>
                                    </select>
                                    <div class="invalid-feedback text-end labor-num-invalid-feedback">
                                        กรุณาระบุจำนวนคน
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12" id="stuff-type-div" style="display: none;">
                        <div class="d-flex flex-column text-bg-light rounded shadow p-2">
                            <label class="mt-3 ms-3 fw-bold">ประเภทสินค้า</label>
                            <div class="d-flex flex-column gap-3 p-2">
                                <!-- <input type="number" class="form-control text-center" placeholder="จำนวนรถ"
                                        inputmode="numeric" id="stuff-type" name="stuff-type" pattern="[0-9]*" min="1" required> -->
                                <select class="form-select" aria-label="Default select example" id="stuff-type"
                                    name="stuff-type" required>
                                    <option value="" selected disabled selected>กรุณาเลือกประเภทสินค้า</option>
                                    <option value="พัสดุทั่วไป ไม่เกิน 2 กิโล">พัสดุทั่วไป ไม่เกิน 2 กิโล
                                    </option>
                                    <option value="พัสดุมากกว่า 100 ชิ้น ขนาดเล็ก">พัสดุมากกว่า 100 ชิ้น ขนาดเล็ก
                                    </option>
                                    <option value="สิ้นค้าชิ้นใหญ่ มากกว่า 1">สิ้นค้าชิ้นใหญ่ มากกว่า 1</option>
                                    <option value="เครื่องใช้ไฟฟ้า">เครื่องใช้ไฟฟ้า</option>
                                    <option value="อื่นๆ">อื่นๆ</option>
                                </select>
                                <div class="invalid-feedback text-end stuff-type-invalid-feedback">
                                    กรุณาระบุประเภทสินค้า
                                </div>
                            </div>
                            <label class="mt-2 ms-3 fw-bold">แนบรูปสินค้า</label>
                            <div class="d-flex flex-column gap-3 p-2">
                                <div class="col-12">
                                    <div class="row g-2">
                                        <div class="col-12">
                                            <div class="form-file d-none">
                                                <input type="file" class="form-control" id="stuff-img" name="stuff-img"
                                                    accept="image/*" required>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="row g-2">
                                                <div class="col-12">
                                                    <div class="img-thumbnail text-center">
                                                        <img src="" class="img-fluid d-none" alt=""
                                                            id="stuff-img-preview" style="max-height: 500px">
                                                        <div
                                                            class="d-flex w-100 h-100 align-items-center justify-content-center m-2">
                                                            <button class="btn btn-outline-secondary" id="choose-img"
                                                                type="button" onclick="$('#stuff-img').click();">
                                                                คลิกเพื่อเลือกรูปภาพสินค้า
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                    <div class="alert alert-danger text-center h4"
                                                        id="stuff-img-invalid-feedback" style="display: none;">
                                                        กรุณาเลือกรูปภาพสินค้า
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 mt-3" id="map-marker-div" style="display: none;">
                            <div class="d-flex flex-column text-bg-light rounded shadow p-2">
                                <label class="mt-3 ms-3 fw-bold">ระบุสถานที่รับ/ส่งสินค้า</label>
                                <div class="d-flex flex-column gap-3 p-2">
                                    <div id="stops-points" class="col-12 m-0 p-0">

                                    </div>
                                    <div class="d-flex flex-column justify-content-center align-items-center gap-2">

                                        <div class="col-12 d-flex align-items-center justify-content-center">
                                            <button type="button"
                                                class="btn btn-sm btn-warning select-map-btn rounded m-1">
                                                <i class="bi bi-plus-circle-fill"></i>
                                            </button>
                                            <div class="text-start">
                                                เพิ่มจุดรับ/ส่งสินค้า (สามารถเลือกจุดได้มากกว่า 1 จุด)
                                            </div>
                                        </div>
                                        <div class="col-12 text-center" style="display: none;">
                                            <button type="button" class="btn btn-success m-1" id="confirm-stops-point">
                                                <i class="bi bi-check-circle-fill"></i>&nbsp;ยืนยันจุดรับ/ส่งสินค้า
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- ปุ่มบันทึก -->
                        <!-- <div class="col-12 mt-4 mb-5 text-center">
                            <button type="submit"
                                class="btn btn-lg btn-primary w-100 d-flex justify-content-center align-items-center shadow">
                                <img width="30" src="https://img.icons8.com/color/48/save--v1.png" alt="save--v1" />
                                &nbsp;บันทึก</button>
                        </div> -->
                    </div>
                </div>
            </section>
            <section class="col-md-6 text-center p-2 rounded bg-light" id="summary-map-sec" style="display: none;">
                <div id="directions-panel" style="max-width: 100%; aspect-ratio: 1/1;"></div>
                <div class="row">
                    <div class="col table-responsive mt-3">
                        <table class="table table-primary table-bordered table-striped" style="width: 100%;">
                            <tr>
                                <th>ระยะทางรวม</th>
                                <td id="total-distance"></td>
                            </tr>
                            <tr>
                                <th>เวลาเดินทาง (ไม่รวมเวลาขนสินค้า)</th>
                                <td id="total-time"></td>
                            </tr>
                            <!-- <tr class="table-danger">
                                    <th>ราคาค่าขนส่ง</th>
                                    <td id="total-price"></td>
                                </tr> -->
                        </table>
                    </div>
                    <div class="col-12 table-responsive mt-3">
                        <!-- <div class="alert alert-danger text-center h4">
                                ราคาค่าขนส่ง <span id="total-price" class="fw-bold"></span><br>
                                ค่าแรงงาน <span id="total-labor-price" class="fw-bold"></span><br><br>
                                รวมทั้งสิ้น <span id="total-all-price" class="fw-bold"></span>

                            </div> -->
                        <table class="table table-light table-bordered table-striped" style="width: 100%;">
                            <tr>
                                <td style="width: 50%; text-align:start">ค่าขนส่ง</td>
                                <td id="total-price" style="width: 50%; text-align:end"></td>
                            </tr>
                            <tr>
                                <td style="width: 50%; text-align:start">ค่าแรงงาน</td>
                                <td id="total-labor-price" style="width: 50%; text-align:end"></td>
                            </tr>
                            <tr class="table-danger h3">
                                <th style="width: 50%; text-align:start">รวมทั้งสิ้น</th>
                                <td id="total-all-price" style="width: 50%; text-align:end"></td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="row g-3">
                    <div class="col-12">
                        <!-- เลือกวันที่ต้องการจอง -->
                        <label class="mt-3 ms-3 fw-bold">เลือกวันที่ต้องการจอง</label>
                        <input type="datetime-local" class="form-control" placeholder="วันที่ต้องการจอง" id="order-date"
                            name="order-date" required>
                        <div class="invalid-feedback text-end order-date-invalid-feedback">
                            กรุณาเลือกวันที่ต้องการจอง
                        </div>
                    </div>
                    <div class="col-12 text-center">
                        <button type="submit"
                            class="btn btn-lg btn-primary w-100 d-flex justify-content-center align-items-center shadow"
                            id="confirm-order-btn">
                            <img width="30" src="https://img.icons8.com/color/48/save--v1.png" alt="save--v1" />
                            &nbsp;ยืนยันการจอง</button>
                    </div>
                </div>
            </section>
            <!-- response section -->
            <section id="response-sec" style="display: none;">
                <div class="row justify-content-center">
                    <div class="col-md-5">
                        <div class="alert alert-warning">
                            <div class="row g-2">
                                <div class="col-12 text-center">
                                    <div class="h4">รายละเอียดการจอง</div>
                                </div>
                                <div class="col-12 text-center">
                                    <div>รหัสจองคิวของคุณคือ</div>
                                </div>
                                <div class="col-12 text-center">
                                    <div class="display-4" id="booking-id"></div>
                                </div>
                                <div class="col-12 text-center">
                                    <div>กรุณาเก็บรหัสจองคิวไว้เพื่อใช้ในการติดตามสถานะการจอง หรือแก้ไขข้อมูลการจอง
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </form>
        <div class="offcanvas offcanvas-end" tabindex="-1" id="form-offcanvas" aria-labelledby="form-offcanvasLabel">
            <div class="offcanvas-body px-0 m-0 h-100 d-flex align-items-center flex-column w-100">
                <!-- search box -->
                <div class="row text-bg-primary w-100 p-2">
                    <div class="col-12">
                        <input type="" class="form-control" placeholder="ค้นหาสถานที่" id="search-address"
                            list="address-list" autocomplete="on">
                        <label for="search-address" class="w-100">
                            กรณีค้าหาไม่พบ สามารถคลิกที่แผนที่ หรือลากหมุดไปวางได้เลย
                        </label>
                        <datalist id="address-list"></datalist>
                    </div>
                </div>
                <div id="map"></div>
            </div>
            <div class="offcanvas-footer btn btn-lg btn-secondary rounded-0" data-bs-dismiss="offcanvas"><i
                    class="bi bi-x-lg"></i>&nbsp;ยกเลิก</div>
        </div>
    </main>
    <div class="modal fade" id="menu-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="menu-modalLabel" aria-hidden="true">
        <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="menu-modalLabel">รายการจองรถของ <span id="user-name"></span></h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body container-fluid">
                    <div class="table-responsive"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
    <script>
        // VConsole will be exported to `window.VConsole` by default.
        // var vConsole = new window.VConsole();
    </script>
    <script>
        var profile, rate_data
        var scriptUrl = 'https://script.google.com/macros/s/AKfycbwXB8uhOk1tAu-ZI5CwSwVg63pQ2BabN6IG4fb6Tg_00meCturU33zIs2LO9Wg36DhEAg/exec'
        $(document).ready(() => {
            initialLiffApp();

        })
        function initialLiffApp() {
            liff.init({
                liffId: "1657301397-EXOm2nwk",
                // liffId: "1655873446-MpmBPPzl",
                withLoginOnExternalBrowser: true
            })
            liff.ready.then(async () => {
                checkRegist()
                $.getJSON(scriptUrl, function (res) {
                    rate_data = res
                    console.log("🚀 !! rate_data:", rate_data)
                })
                getBookingData()
            })
            initFormValidation()
        }
        function checkRegist() {
            const loginpass = (data) => {
                console.log("🚀 !! data:", data)
                loginuser = {
                    uid: liff.getDecodedIDToken().sub,
                    expired: new Date().getTime() + (1000 * 60 * 60 * 6),
                    name: data.name,
                    phone: data.phone,
                    email: data.email,
                }
                localStorage.setItem('loginuser', JSON.stringify(loginuser))
                $('#user-name').text(loginuser.name)
                $('.main').removeClass('d-none').addClass('d-flex')
                $.LoadingOverlay("hide", true)
                let today = new Date()
                let tomorrow = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 1, 0, 0, 0)
                // tomorrow = tomorrow.getFullYear() + '-' + (tomorrow.getMonth() + 1) + '-' + tomorrow.getDate()
                $('#order-date').change(function () {
                    let order_date = new Date($(this).val())
                    console.log("🚀 !! order_date:", order_date)
                    if (order_date < tomorrow) {
                        $(this).val('')
                        Swal.fire({
                            icon: 'error',
                            title: 'กรุณาเลือกวันที่ต้องการจองใหม่',
                            text: 'กรุณาเลือกวันจองล่วงหน้า 1 วัน',
                            confirmButtonText: 'ตกลง',
                            allowOutsideClick: false,
                            confirmButtonColor: '#0d6fff',
                        })
                    }
                })
                $('.navbar').removeClass('d-none')
            }
            $.LoadingOverlay("show")
            let loginuser = localStorage.getItem('loginuser')
            loginuser = JSON.parse(loginuser)
            if (loginuser && loginuser != null) {
                if (!(loginuser.name && loginuser.phone && loginuser.email)) {
                    localStorage.removeItem('loginuser')
                    return checkRegist()
                }
                if (loginuser.uid == liff.getDecodedIDToken().sub) {
                    if (loginuser.expired < new Date().getTime()) {
                        console.log('expired');
                        localStorage.removeItem('loginuser')
                        return checkRegist()
                    }
                    return loginpass(loginuser)
                }
                return true
            }
            $.post(scriptUrl, {
                opt: 'checkregist',
                uid: liff.getDecodedIDToken().sub
            }, function (res) {
                console.log("🚀 !! res:", res)
                $.LoadingOverlay("hide")
                if (!res.status) {
                    $('.main').removeClass('d-flex').addClass('d-none')
                    Swal.fire({
                        icon: 'error',
                        title: 'กรุณาลงทะเบียนก่อนใช้งาน',
                        allowOutsideClick: false,
                        showCancelButton: true,
                        confirmButtonText: 'ลงทะเบียน',
                        cancelButtonText: 'ยกเลิก',
                        allowOutsideClick: false,
                        confirmButtonColor: '#0d6fff',
                        cancelButtonColor: '#dc3545',
                        reverseButtons: true
                    }).then((result) => {
                        if (result.isConfirmed) {
                            login()
                        }
                    })
                } else {
                    loginpass(res)
                }
            })
        }
        $('.select-map-btn').click(function () {
            // initMap()
            console.log($(this).attr('id'));
            $('#form-offcanvas').attr('data-select-target', $(this).find('span:first').attr('id'))
            $('#form-offcanvas').offcanvas('show')
            // scroll this to top
            // $('html, body').animate({
            //   scrollTop: $(this).offset().top
            // }, 100);

        })
        $('input[name="truck-type"]').change(function () {
            let type = $(this).attr('id')
            let check = $(this).prop('checked')
            if (!check) return
            $('#truck-sub-type-div').hide(1, function () {
                validateCheckBtn()
            })
            $('#truck-num-div').hide(1, function () {
                $('#truck-num').val(1)
            })
            $('#truck-sub-type-div').hide(1, function () {
                $('input[name="truck-sub-type"]').each(function () {
                    if ($(this).hasClass(type)) {
                        $(this).parent().removeClass('d-none')
                    } else {
                        $(this).parent().addClass('d-none')
                    }
                    $(this).prop('checked', false)
                })
                $('#truck-sub-type-div').show(1)
                $('input[name="truck-sub-type"]').closest('.text-bg-light').removeClass('border border-success alert-validated border-danger border-2 rounded alert-invalidate')
                $('input[name="truck-sub-type"]').closest('.text-bg-light').parent().find('.invalid-feedback').hide()
                $('input[name="truck-sub-type"]').change()
            })
            getTotalPrice()
        })
        $('input[name="truck-sub-type"]').change(function () {
            console.log('aaa', $(this).is(':checked'));
            if (!$(this).is(':checked')) {
                $('#truck-num-div').hide(1, function () {
                    if ($('#truck-num').val() <= 1) $('#truck-num').val(1)
                    $('#stuff-type-div').hide()
                    $('#labor-need-div').hide()
                    $('#map-marker-div').hide()
                    $('html, body').animate({
                        scrollTop: $('input[name="truck-sub-type"]').parent().offset().top
                    }, 100);
                })
            } else {
                validateCheckBtn()
                $('#truck-num-div').slideDown(100, function () {
                    if ($('#truck-num').val() <= 1) $('#truck-num').val(1).focus()
                    $('#labor-need-div').slideDown(100)
                    // $('#map-marker-div').slideDown(100)
                    $('#stuff-type-div').slideDown(100)
                    // scroll truck-num-div to top
                    $('html, body').animate({
                        scrollTop: $("#truck-num-div").offset().top
                    }, 100);
                })
                $('#labor-need-div').slideDown(100)
                getTotalPrice()
            }
        })

        $('#truck-num').on('change', function () {
            getTotalPrice()
        })

        $('#labor-need').change(function () {
            getTotalPrice()
            let check = $(this).prop('checked')
            if (check) {
                $('#labor-num').parent().slideDown(100)
                $('#labor-num').val(1).focus()
                $('#labor-num').prop('required', true)
            } else {
                $('#labor-num').val(1).prop('required', false)
                $('#labor-num').parent().slideUp(100)
            }
            // // scroll #map-marker-div to top
            // $('html, body').animate({
            //   scrollTop: $("#map-marker-div").offset().top
            // }, 100);
        })

        $('#labor-num').on('change', function () {
            getTotalPrice()
        })

        $('#stuff-img').change(function () {
            if (this.files.length < 1) return
            console.log(this.files[0].size / 1024 / 1024 + " MB");
            $('.img-thumbnail').LoadingOverlay("show")
            new Compressor(this.files[0], {
                quality: 0.5,
                success: (result) => {
                    let reader = new FileReader()
                    reader.readAsDataURL(result)
                    reader.onload = function (e) {
                        $('.img-thumbnail').LoadingOverlay("hide")
                        console.log(e.target.result.length / 1024 / 1024 + " MB");
                        $('#stuff-img-preview').attr('src', e.target.result).removeClass('d-none')
                        $('#choose-img').text('คลิกเพื่อเปลี่ยนรูป').parent().removeClass('h-100')
                        // remove aspect-ratio css
                        $('.img-thumbnail').css('aspect-ratio', 'unset')
                        $('#map-marker-div').slideDown(100).addClass('h-100')
                        // scroll #map-marker-div to top
                        setTimeout(() => {
                            $('html, body').animate({
                                scrollTop: $("#map-marker-div").offset().top - 10
                            }, 100);
                        }, 100);
                    }
                },
                error: (err) => {
                    console.log(err.message);
                },
            })
        })

        $('#confirm-stops-point').on('click', function () {
            let pickup = stops_point.filter(e => e.point_text == 'จุดรับสินค้า')
            let dropoff = stops_point.filter(e => e.point_text == 'จุดส่งสินค้า')
            if (pickup.length < 1) {
                Swal.fire({
                    icon: 'error',
                    title: 'กรุณาเลือกจุดรับสินค้า',
                    allowOutsideClick: false,
                })
                return
            } else if (dropoff.length < 1) {
                Swal.fire({
                    icon: 'error',
                    title: 'กรุณาเลือกจุดส่งสินค้า',
                    allowOutsideClick: false,
                })
                return
            }
            calculateDirections()
        })

        function login() {

            Swal.fire({
                title: 'กรุณากรอกข้อมูลเพื่อลงทะเบียน',
                html: `<div class="container-fluid">
                                <form class="row g-2 needs-validation" id="regist-form" novalidate>
                                    <div class="col-12">
                                        <label for="name" class="form-label">ชื่อ-สกุล</label>
                                        <input type="text" class="form-control form-control-lg text-center bg-primary-subtle" id="name" name="name" placeholder="ชื่อ-สกุล" required>
                                        <div class="invalid-feedback text-end name-invalid-feedback">
                                            กรุณากรอกชื่อ-สกุล
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <label for="phone" class="form-label">เบอร์โทรศัพท์</label>
                                        <input type="tel" class="form-control form-control-lg text-center bg-primary-subtle" id="phone" name="phone" placeholder="เบอร์โทรศัพท์" required>
                                        <div class="invalid-feedback text-end phone-invalid-feedback">
                                            กรุณากรอกเบอร์โทรศัพท์
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <label for="email" class="form-label">อีเมล <span class="text-muted">(ไม่บังคับ)</span></label>
                                        <input type="email" class="form-control form-control-lg text-center bg-primary-subtle" id="email" name="email" placeholder="อีเมล">
                                    </div>
                                </form>
                    </div>`,
                preConfirm: () => {
                    if (!validateRegistForm()) {
                        return false
                    }
                    return {
                        name: $('#name').val(),
                        phone: $('#phone').val(),
                        email: $('#email').val()
                    }
                },
                showCancelButton: true,
                confirmButtonText: 'ลงทะเบียน',
                cancelButtonText: 'ยกเลิก',
                allowOutsideClick: false,
                confirmButtonColor: '#0d6fff',
                cancelButtonColor: '#dc3545',
                reverseButtons: true,

            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        icon: 'info',
                        title: 'กำลังลงทะเบียน',
                        allowOutsideClick: false,
                        didOpen: () => {
                            Swal.showLoading()
                        }
                    })
                    $.post(scriptUrl, {
                        opt: 'regist',
                        uid: liff.getDecodedIDToken().sub,
                        phone: result.value.phone,
                        name: result.value.name,
                        email: result.value.email
                    }, function (res) {
                        if (res.status) {
                            Swal.fire({
                                icon: 'success',
                                title: 'ลงทะเบียนสำเร็จ',
                                showConfirmButton: false,
                                timer: 1500
                            }).then(() => {
                                loginuser = {
                                    name: result.value.name,
                                    phone: result.value.phone,
                                    email: result.value.email,
                                    uid: liff.getDecodedIDToken().sub
                                }
                                localStorage.setItem('loginuser', JSON.stringify(loginuser))
                                $('.main').removeClass('d-none').addClass('d-flex')
                            })
                        } else {
                            Swal.fire({
                                icon: 'error',
                                title: 'ลงทะเบียนไม่สำเร็จ',
                                confirmButtonText: 'ลองใหม่',
                                allowOutsideClick: false
                            }).then(() => {
                                if (result.isConfirmed) {
                                    login()
                                }
                            })
                        }
                    })

                }
            })
        }

        function validateRegistForm() {
            let name = $('#name').val()
            let phone = $('#phone').val()
            let res = true
            if (name == '') {
                $('#name').addClass('is-invalid')
                $('.name-invalid-feedback').show()
                res = false
            } else {
                $('#name').removeClass('is-invalid')
                $('.name-invalid-feedback').hide()
            }
            if (phone == '') {
                $('#phone').addClass('is-invalid')
                $('.phone-invalid-feedback').show()
                res = false
            } else {
                $('#phone').removeClass('is-invalid')
                $('.phone-invalid-feedback').hide()
            }
            return res
        }


        function validateCheckBtn() {
            const checkValidate = (arr, id) => {
                console.log("🚀 !! arr.some(e => e == true:", arr.some(e => e == true))
                if (arr.some(e => e == true)) {
                    res.push(true)
                    showValidatedFeedback(id)
                } else {
                    res.push(false)
                    showInvalidFeedback(id)
                }
            }
            let res = []
            // check only if element is shown
            if ($('input[name="truck-type"]').parent().is(':visible')) {
                let truck_type = $('input[name="truck-type"]').toArray().map(e => $(e).is(':checked'))
                console.log("🚀 !! truck_type:", truck_type)
                checkValidate(truck_type, 'input[name="truck-type"]')
            }

            if ($('input[name="truck-sub-type"]').parent().is(':visible')) {
                console.log('validate truck-sub-type');
                let truck_subtype = $('input[name="truck-sub-type"]').toArray().map(e => $(e).is(':checked'))
                console.log("🚀 !! truck_subtype:", truck_subtype)
                checkValidate(truck_subtype, 'input[name="truck-sub-type"]')
            }
            return res.every(e => e == true)
        }

        function showInvalidFeedback(id) {
            $(id).closest('.text-bg-light').removeClass('border border-success alert-validated').addClass('border border-danger border-2 rounded alert-invalidate')
            $(id).closest('.text-bg-light').parent().find('.invalid-feedback').show()
        }

        function showValidatedFeedback(id) {
            $(id).closest('.text-bg-light').removeClass('border border-danger alert-invalidate').addClass('border border-success border-2 rounded alert-validated')
            $(id).closest('.text-bg-light').parent().find('.invalid-feedback').hide()
        }

        function formSubmit() {
            let loginuser = localStorage.getItem('loginuser')
            loginuser = JSON.parse(loginuser)
            console.log("🚀 !! loginuser:", loginuser)
            let formdata = $('.main').serializeArray()
            let obj = {}
            formdata.forEach(e => {
                obj[e.name] = e.value
            })
            if ($('#labor-need').prop('checked')) {
                obj['labor-need'] = 'ต้องการแรงงาน'
            } else {
                obj['labor-need'] = 'ไม่ต้องการแรงงาน'
                obj['labor-num'] = '0'
            }
            obj['name'] = loginuser.name
            obj['phone'] = loginuser.phone
            obj['email'] = loginuser.email
            let waypointsStr = waypoints.join('/');
            let steps_name = stops_name.join(' >> ')
            let url = `https://www.google.com/maps/dir/` + waypointsStr
            obj['route_url'] = url
            obj['steps_name'] = steps_name
            obj['distance'] = $('#total-distance').data('distance')
            obj['time'] = $('#total-time').data('time')
            obj['price'] = $('#total-price').data('price')
            obj['labor_price'] = $('#total-labor-price').data('labor_price') === 0 ? '0' : $('#total-labor-price').data('labor_price')
            obj['total_price'] = $('#total-all-price').data('total_price')
            obj['stuff_img'] = $('#stuff-img-preview').attr('src')
            obj['uid'] = liff.getDecodedIDToken().sub

            console.log("🚀 !! obj:", obj)
            Swal.fire({
                icon: 'question',
                title: 'ยืนยันข้อมูลการจอง',
                text: ' กรุณาตรวจสอบข้อมูลให้ถูกต้องก่อนยืนยัน',
                showCancelButton: true,
                confirmButtonText: 'ยืนยัน จองรถเลย',
                cancelButtonText: 'แก้ไข',
                allowOutsideClick: false,
                confirmButtonColor: '#0d6fff',
                cancelButtonColor: '#dc3545',
                reverseButtons: true
            }).then(res => {
                if (res.isConfirmed) {
                    saveData(obj)
                }
            })
        }

        function saveData(data) {

            Swal.fire({
                icon: 'info',
                title: 'กำลังบันทึกข้อมูล',
                text: 'กรุณาอย่าปิดหน้าต่างนี้ หรือออกจากหน้านี้',
                allowOutsideClick: false,
            })
            Swal.showLoading(Swal.getConfirmButton())
            data = {
                opt: 'savedata',
                data: JSON.stringify(data),
            }
            $.ajax({
                url: scriptUrl,
                type: 'POST',
                data: data,
                success: (res) => {
                    console.log("🚀 ~ saveData ~ res:", res)
                    if (res.status) {
                        $('#booking-id').html(res.data['booking-id'])
                        $('section').hide()
                        $('#response-sec').show()
                        $.post(scriptUrl, {
                            opt: 'sendline',
                            data: JSON.stringify(res.data)
                        })
                        Swal.fire({
                            icon: 'success',
                            title: 'บันทึกข้อมูลสำเร็จ',
                            html: 'เจ้าหน้าที่จะติดต่อกลับภายใน 24 ชั่วโมง<br>ขอบคุณที่ใช้บริการ',
                            allowOutsideClick: false,
                            showCancelButton: false,
                            confirmButtonText: 'ตกลง',
                            confirmButtonColor: '#0d6fff',
                        })
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'บันทึกข้อมูลไม่สำเร็จ',
                            allowOutsideClick: false,
                        })
                    }
                }
            })
        }

    </script>
    <script>
        function initFormValidation() {
            'use strict'
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            const forms = document.querySelectorAll('.needs-validation')
            // Loop over them and prevent submission
            Array.from(forms).forEach(form => {
                $(form).off('submit').on('submit', () => {
                    event.preventDefault()
                    if (!form.checkValidity()) {
                        event.stopPropagation()
                        form.classList.add('was-validated')
                        // go to first invalid input

                        $(form).find(":invalid").first().focus();
                    } else {
                        if (validateCheckBtn()) {
                            formSubmit()
                            console.log('submit!!!!')
                        } else {

                        }
                    }
                })
            })
        }
    </script>
    <script>
        let map; state = 'add'
        // initMap is now async
        async function initMap() {
            console.log("🚀 ~ initMap ~ initMap");
            // Request libraries when needed, not in the script tag.
            const { Map } = await google.maps.importLibrary("maps");

            // Short namespaces can be used.
            $('#map').css('width', '100%').css('height', '100%')
            // set map to current location

            placeMarker(Map)
        }

        function placeMarker(Map) {
            let searchBox
            const displaySuggestions = function (predictions, status) {
                if (status == google.maps.places.PlacesServiceStatus.ZERO_RESULTS) {

                    return
                }
                $('#address-list').empty()
                predictions.forEach((prediction) => {
                    if (!prediction.place_id) return
                    console.log("🚀 !! prediction:", prediction)
                    // show prediction
                    // let opt = $(`<option value="${prediction.description}">`).attr('data-placeid', prediction.place_id).html(`<span class="fw-bold">${prediction.structured_formatting.main_text}</span><span>${prediction.structured_formatting.secondary_text}</span>`)
                    // $('#address-list').append(opt)
                });
            };
            // Try to get the user's current location.
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async (position) => {
                    console.log("🚀 !! position:", position)
                    map = new Map(document.getElementById("map"), {
                        center: {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude,
                        },
                        zoom: 15,
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                    });
                    const { Autocomplete } = await google.maps.importLibrary("places");
                    // Create the search box and link it to the UI element.
                    const input = document.getElementById("search-address");
                    searchBox = new Autocomplete(input, {
                        componentRestrictions: { country: "th" },
                        fields: ["formatted_address", "geometry", "name", "place_id"],
                        strictBounds: false,
                    });
                    searchBox.bindTo("bounds", map);


                    let markers = [];

                    // Listen for the event fired when the user selects a prediction and retrieve
                    // more details for that place.
                    searchBox.addListener("place_changed", async () => {
                        let places = searchBox.getPlace();
                        if (!places.place_id) {
                            console.log("no place id");
                            // get suggestion list
                            places = await new Promise((resolve, reject) => {
                                service.getQueryPredictions({ input: $('#search-address').val() }, (predictions, status) => {
                                    if (status == google.maps.places.PlacesServiceStatus.ZERO_RESULTS) {
                                        reject([])
                                    }
                                    resolve(predictions)
                                });
                            })
                            places = places[0]
                            places.formatted_address = places.structured_formatting.secondary_text
                            places.name = places.structured_formatting.main_text
                        }
                        console.log("🚀 !! places:", places)
                        // check if no suggestion


                        if (!places.place_id) {
                            return;
                        }

                        // Clear out the old markers.
                        markers.forEach((marker) => {
                            marker.setMap(null);
                        });
                        markers = [];
                        // get first places
                        const place = places
                        addMarker(place)
                        console.log("🚀 ~ places:", place)
                    });

                    let p = await getPlaceDetailFromLatLng(position.coords.latitude, position.coords.longitude)
                    console.log("🚀 !! p:", p)
                    addMarker(p)



                    // Create a custom overlay.
                    let overlay = new google.maps.OverlayView();
                    overlay.onAdd = function () {
                        let div = document.createElement('div');
                        div.style.position = 'absolute';
                        div.style.width = '20px';
                        div.style.height = '20px';
                        div.style.backgroundColor = '#5384ED';
                        div.style.border = '2px solid #ffffff';
                        div.style.borderRadius = '50%';
                        // add shadow
                        div.style.boxShadow = '0 0 8px #5384ED';
                        div.style.cursor = 'pointer';
                        // set animation infinite and reverse
                        div.style.animation = 'blink 1s ease-in-out infinite alternate';

                        this.div = div;
                        let panes = this.getPanes();
                        panes.overlayLayer.appendChild(div);
                    };

                    overlay.draw = function () {
                        let pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                        let projection = this.getProjection();
                        let point = projection.fromLatLngToDivPixel(pos);

                        if (point) {
                            this.div.style.left = point.x + 'px';
                            this.div.style.top = point.y + 'px';
                        }
                    };
                    // Add the custom overlay to the map.
                    overlay.setMap(map);

                    // add event listener on click
                    google.maps.event.addListener(map, 'click', async function (event) {
                        let place
                        if (!event.placeId) place = await getPlaceDetailFromLatLng(event.latLng.lat(), event.latLng.lng())
                        else place = await getPlaceFromPlaceId(event.placeId)
                        let marker = await setMarker(place)
                        setDragListener(marker)
                        getFormatted_address(marker, place)
                    });
                }, () => {
                    // If the user denies the Geolocation request or it fails for some other reason, do nothing.
                });

            }
        }
        var markers = []; edit = false
        // on off canvas close
        $('#form-offcanvas').on('hidden.bs.offcanvas', function () {
            edit = false
            $('#search-address').val('')
            console.log("🚀 !! edit:", edit)
        })

        async function setMarker(place) {
            console.log("🚀 !! place:", place)
            if (!place.geometry) {
                place = await getPlaceFromPlaceId(place.place_id)
            }

            markers.forEach((marker) => {
                marker.setMap(null);
            });
            map.setCenter(place.geometry.location);
            map.setZoom(15);
            // set marker
            let marker = new google.maps.Marker({
                map: map,
                position: place.geometry.location,
                draggable: true,
                animation: google.maps.Animation.DROP,
            });
            markers.push(marker);
            return marker
        }

        function setDragListener(marker) {
            // add event listener on drop
            google.maps.event.addListener(marker, 'dragend', function () {
                getFormatted_address(marker, false)
            });
            return true
        }

        async function addMarker(place) {
            if (!place.geometry) {
                place = await getPlaceFromPlaceId(place.place_id)
            }
            let marker = await setMarker(place)
            getFormatted_address(marker, place)
            setDragListener(marker)

        }

        async function getPlaceFromPlaceId(placeid) {
            let request = {
                placeId: placeid,
                fields: ['name', 'geometry', 'formatted_address', 'place_id'],

            };
            let service = new google.maps.places.PlacesService(map);
            let place = await new Promise((resolve, reject) => {
                service.getDetails(request, (p, status) => {
                    if (status == google.maps.places.PlacesServiceStatus.OK) {
                        resolve(p)
                    } else {
                        reject()
                    }
                })
            })
            return place
        }
        var infoWindows = []; stops_point = [];
        async function getFormatted_address(marker, place = false) {
            if (!place) {
                place = await getPlaceDetailFromLatLng(marker.position.lat(), marker.position.lng())
                console.log("🚀 !! place:", place)
            }
            // show popover with select button
            let btn = $('<button>', { class: "btn btn-sm btn-primary mt-2 select-address-btn shadow-none", id: place.place_id, type: "button" }).html('<i class="bi bi-hand-index-thumb-fill"></i>&nbsp;เลือก')
            let content = `<div class="container-fluid py-2">
                                    <div class="d-flex flex-column">
                                        <span class="fw-bold">${place.name}</span>
                                        <span style="font-size: smaller;">${place.formatted_address}</span>
                                    </div>
                                    <div class="d-flex justify-content-end">
                                        ${btn.prop('outerHTML')}
                                    </div>
                                    </div>`
            infoWindows.forEach((infowindow) => {
                infowindow.close();
            });
            let infowindow = new google.maps.InfoWindow({
                content: content,
            });
            infoWindows.push(infowindow)
            // remove old infowindow
            google.maps.event.addListener(infowindow, 'domready', function () {
                // Assuming you're using jQuery, find the button within the infowindow content
                let btn = $('#' + place.place_id)
                console.log("🚀 !! btn:", btn)

                $(btn).on('click', function () {
                    console.log('Button in InfoWindow clicked');
                    console.log('click');
                    $('#form-offcanvas').offcanvas('hide')
                    let target = $('#form-offcanvas').data('select-target')
                    console.log("🚀 !! edit:", edit)
                    if (edit) {
                        stops_point.forEach((point, i) => {
                            if (point.place_id == edit) {
                                place.point_text = point.point_text
                                stops_point[i] = place
                            }
                        })
                        edit = false
                    } else {
                        if (stops_point.findIndex(p => p.place_id == place.place_id) > -1) {
                            Swal.fire({
                                icon: 'error',
                                title: 'ไม่สามารถเพิ่มจุดรับ/ส่งสินค้าซ้ำกันได้',
                                allowOutsideClick: false,
                            })
                            return
                        }
                        place.point_text = 'จุดรับสินค้า'
                        stops_point.push(place)
                    }
                    renderStops_point()
                });
            });
            infowindow.open(map, marker);

        }

        async function getPlaceDetailFromLatLng(lat, lon) {
            let latlng = new google.maps.LatLng(lat, lon);
            let place = await new Promise((resolve, reject) => {
                new google.maps.Geocoder().geocode({ 'latLng': latlng }, function (results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        if (results[0]) {
                            new google.maps.places.PlacesService(map).getDetails({
                                placeId: results[0].place_id,
                                fields: ['name', 'geometry', 'formatted_address', 'place_id'],
                                // in thai area
                                componentRestrictions: { country: "th" },
                                restrictBounds: true,
                                strictBounds: false,

                            }, (place, status) => {
                                if (status == google.maps.places.PlacesServiceStatus.OK) {
                                    resolve(place)
                                } else {
                                    reject()
                                }
                            })
                        } else {
                            reject()
                        }
                    } else {
                        reject()
                    }
                });
            })
            return place
        }


        function editAddress(btn) {
            $('#form-offcanvas').offcanvas('show')
            $('#form-offcanvas').attr('data-select-target', $(btn).data('target'))
            // $('#search-address').val($(btn).data('address'))
            edit = $(btn).data('placeid')
            addMarker({ place_id: $(btn).data('placeid') })
        }


        var waypoints = [], stops_name = []
        function renderStops_point() {
            // check viewport size is mobile
            let viewport = getViewportSize()

            waypoints = []
            $('#stops-points').empty()
            stops_point.forEach((point, i) => {
                waypoints.push(point.geometry.location.lat() + ',' + point.geometry.location.lng())
                let alert = $('<div>', { class: "alert alert-warning border border-2" })
                let row = $('<div>', { class: "row g-2" })
                // row.append($('<span>', { class: "col-auto bg-primary text-light rounded border border-2 px-2" }).text(`จุดที่ ${i + 1} ${point.point_text}`))
                $(row).append(`<label class="toggleSwitch nolabel" onclick="" id="toggleSwitch${i + 1}">
                         <input type="checkbox" />
                        <a></a>
                        <span>
                            <span class="left-span">${viewport == 1 ? 'รับ' : 'จุดรับสินค้า'}</span>
                            <span class="right-span">${viewport == 1 ? 'ส่ง' : 'จุดส่งสินค้า'}</span>
                        </span>
                    </label>`)

                let html = `<div class="row g-2">
                                    <div class="d-flex flex-column">
                                        <span class="col-12 text-start">${point.name}</span>
                                        <span class="col-12 text-start text-muted" style="font-size: 0.8rem;">${point.formatted_address}</span>
                                    </div>
                                    <span class="col-12 justify-content-end float-end">
                                        <div style="position: absolute; right: 5px; top: 5px;">
                                            <button type="button" class="btn btn-sm btn-warning mt-2" data-lat="${point.geometry.location.lat()}" data-lng="${point.geometry.location.lng()}" data-placeid="${point.place_id}" data-target="select-start" id="edit-${point.place_id}"><i class="bi bi-pencil-square"></i> แก้ไข</button>
                                            <button type="button" class="btn btn-sm btn-danger mt-2" data-lat="${point.geometry.location.lat()}" data-lng="${point.geometry.location.lng()}" data-placeid="${point.place_id}" data-target="select-start" id="delete-${point.place_id}"><i class="bi bi-trash"></i> ลบ</button>
                                        </div>

                                    </span>
                                </div>`
                alert.append(row)
                alert.append(html)
                alert.attr('data-lat', point.geometry.location.lat())
                    .attr('data-lng', point.geometry.location.lng())
                    .attr('data-placeid', point.place_id)

                $('#stops-points').append(alert)
                if (i == 0) {
                    // disable toggle
                    $('#toggleSwitch' + (i + 1)).find('input').prop('disabled', true).val('จุดรับสินค้า')

                }
                $('#toggleSwitch' + (i + 1)).click(function () {
                    console.log($(this).find('input').prop('checked'));
                    if ($(this).find('input').prop('checked')) {
                        $(this).find('input').val('จุดส่งสินค้า')
                    } else {
                        $(this).find('input').val('จุดรับสินค้า')
                    }
                    stops_point[i].point_text = $(this).find('input').val()
                    // renderStops_point()
                })


                if (point.point_text) {
                    $('#toggleSwitch' + (i + 1)).find('input').val(point.point_text)
                    if (point.point_text == 'จุดส่งสินค้า') {
                        $('#toggleSwitch' + (i + 1)).find('input').prop('checked', true)
                    } else {
                        $('#toggleSwitch' + (i + 1)).find('input').prop('checked', false)
                    }

                }
                $('#edit-' + point.place_id).on('click', function () {
                    console.log(this);
                    editAddress(this);
                });

                $('#delete-' + point.place_id).on('click', function () {
                    console.log(this);
                    Swal.fire({
                        icon: 'question',
                        title: 'ลบจุดรับส่งสินค้า',
                        text: 'คุณต้องการลบจุดรับส่งสินค้านี้ใช่หรือไม่',
                        showCancelButton: true,
                        confirmButtonText: 'ใช่ ลบเลย',
                        cancelButtonText: 'ไม่ใช่',
                        confirmButtonColor: '#d33',
                        cancelButtonColor: '#3085d6',
                        allowOutsideClick: false,
                        reverseButtons: true,
                    }).then((result) => {
                        if (result.isConfirmed) {
                            let placeid = $(this).data('placeid')
                            stops_point = stops_point.filter(e => e.place_id != placeid)
                            renderStops_point()
                        }
                    })
                });
            })
            if (viewport == 1) {
                $('.toggleSwitch').css('width', '120px')
            } else {
                $('.toggleSwitch').css('width', '200px')
            }
            if (stops_point.length > 0) {
                $('#confirm-stops-point').parent().show(50)
            } else {
                $('#confirm-stops-point').parent().hide(50)
            }
            // scroll $('.select-map-btn') to center
            // $('html, body').animate({
            //   scrollTop: $("#select-map-btn").offset().top
            // }, 100);
            calculateDirections(false)
        }
        function calculateDirections(show_map = true) {
            // if (stops_point.length < 2) return
            let directionsService = new google.maps.DirectionsService();
            let directionsRenderer = new google.maps.DirectionsRenderer();
            let map2 = new google.maps.Map(document.getElementById("directions-panel"), {
                center: { lat: 41.85, lng: -87.65 },
            });
            // set map2 route
            if (show_map) {
                $('#directions-panel').parents('.col-md-6').show(200)
                $('#select-options-form').removeClass('pb-5 mb-5')
            }
            directionsRenderer.setMap(map2);
            let waypts = [];
            console.log("🚀 !! stops_point:", stops_point)
            stops_name = []
            stops_point.forEach((point, i) => {
                stops_name.push('(' + point.point_text.replace(/จุด|สินค้า/g, '') + ')' + point.name)
                if (i == 0 || i == stops_point.length - 1) return
                waypts.push({
                    location: { lat: point.geometry.location.lat(), lng: point.geometry.location.lng() },
                    stopover: true,
                })
            })
            console.log("🚀 !! waypts:", waypts)
            directionsService.route(
                {
                    origin: { lat: stops_point[0].geometry.location.lat(), lng: stops_point[0].geometry.location.lng() },
                    destination: { lat: stops_point[stops_point.length - 1].geometry.location.lat(), lng: stops_point[stops_point.length - 1].geometry.location.lng() },
                    waypoints: waypts,
                    optimizeWaypoints: true,
                    travelMode: google.maps.TravelMode.DRIVING,
                },
                (response, status) => {
                    if (status === "OK") {
                        directionsRenderer.setDirections(response);
                        let route = response.routes[0];
                        console.log("🚀 !! route:", route)


                        // directionsRenderer.setPanel(document.getElementById("directions-panel"));
                        // set routh color
                        directionsRenderer.setOptions({
                            polylineOptions: {
                                strokeColor: "#0d6fff",
                                strokeWeight: 6,
                                strokeOpacity: 0.9,

                            },
                            suppressMarkers: true,
                        });

                        // set marker
                        stops_point.forEach((point, i) => {
                            let marker = new google.maps.Marker({
                                map: map2,
                                position: point.geometry.location,
                                draggable: false,
                                animation: google.maps.Animation.DROP,

                            });
                            let infowindow = new google.maps.InfoWindow({
                                content: point.point_text,
                            });
                            infowindow.open(map2, marker);
                        })

                        // fit boundary to map
                        let bounds = new google.maps.LatLngBounds();
                        stops_point.forEach((point, i) => {
                            bounds.extend(point.geometry.location);
                        })

                        map2.setCenter(bounds.getCenter());
                        map2.fitBounds(bounds, 1);
                        map2.fitBounds(bounds, 1);
                        // get summary distance and time
                        let total = 0
                        let total_time = 0
                        for (let i = 0; i < route.legs.length; i++) {
                            let routeSegment = i + 1;
                            total += route.legs[i].distance.value
                            total_time += route.legs[i].duration.value
                        }
                        $('#total-distance').text((total / 1000).toFixed(2) + ' กม.').attr('data-distance', total)
                        $('#total-time').text(convertTime(total_time)).attr('data-time', total_time)
                        getTotalPrice()
                        // scroll map to top
                        if (show_map) {
                            $('html, body').animate({
                                scrollTop: $("#summary-map-sec").offset().top
                            }, 100);
                        }

                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'ไม่สามารถคำนวณเส้นทางได้',
                            text: 'กรุณาเลือกจุดรับส่งสินค้าให้ถูกต้อง',
                            allowOutsideClick: false,
                            confirmButtonText: 'ตกลง',
                        })
                    }
                }
            );


        }

        function getTotalPrice() {
            if (!rate_data) {
                setTimeout(() => {
                    getTotalPrice()
                }, 1000);
                return
            }
            if ($('#summary-map-sec').is(':hidden')) return
            let distance_meter = Number($('#total-distance').attr('data-distance'))
            console.log("🚀 !! distance_meter:", distance_meter)
            let truck_sub_type = $('input[name="truck-sub-type"]:checked').val()
            console.log("🚀 !! truck_sub_type:", truck_sub_type)
            if (!$('#total-distance').attr('data-distance') || distance_meter == NaN || distance_meter == 'NaN' || distance_meter == undefined || distance_meter == '' || distance_meter == null || !truck_sub_type || truck_sub_type == undefined || truck_sub_type == '' || truck_sub_type == null) return false
            $('#total-price').parent().LoadingOverlay('show')
            let truck_num = Number($('#truck-num').val())
            console.log("🚀 !! truck_num:", truck_num)
            let labor_price
            if ($('#labor-need').prop('checked')) labor_price = Number($('#labor-num').val()) * 500
            else labor_price = '0'
            let distance_km = Math.ceil(distance_meter / 1000)
            let price = Number(rate_data[distance_km][$('input[name="truck-sub-type"]:checked').val()]) * truck_num

            $('#total-price').text((price).toLocaleString() + ' บาท').attr('data-price', price)
            $('#total-labor-price').text((labor_price).toLocaleString() + ' บาท').attr('data-labor_price', labor_price)
            $('#total-all-price').text((price + Number(labor_price)).toLocaleString() + ' บาท').attr('data-total_price', price + Number(labor_price))
            $('#total-price').parent().LoadingOverlay('hide', true)
        }

        function convertTime(time_seconds) {
            let hours = Math.floor(time_seconds / 3600);
            let minutes = Math.ceil((time_seconds - (hours * 3600)) / 60);
            if (hours <= 0) return minutes + ' นาที'
            return hours + ' ชั่วโมง ' + minutes + ' นาที'
        }

        function getViewportSize() {
            //    devide to mobile tablet and desktop
            //    mobile = 1
            //    tablet = 2
            //    desktop = 3
            if ($(window).width() < 768) return 1
            else if ($(window).width() < 992) return 2
            else return 3
        }
        $(document).ready(() => {
            initMap()
        })
    </script>
    <script>
        function getBookingData() {
            let data = {
                opt: 'getbookingdata',
                uid: liff.getDecodedIDToken().sub
            }
            $.post(scriptUrl, data, (res) => {
                $('#check-status-btn').slideDown(200)
                $('#menu-modal')
                .on('shown.bs.modal', function () {
                    let table = $('<table>', { class: "table table-sm table-striped table-hover table-bordered", id: "booking-table", style: "width: 100%;" })
                    let thead = $('<thead>', { class: 'bg-dark text-light text-center text-nowrap' })
                    table.append(thead)

                    let { header, data } = res
                    $('.modal-body').find('.table-responsive').empty()
                    $('.modal-body').find('.table-responsive').append(table)
                    let datatable = $('#booking-table').DataTable({
                        data: data,
                        columns: [
                            {
                                title: 'ประทับเวลา',
                                data: 'timestamp',
                                render: function (data, type, row) {
                                    return moment(data).format('DD/MM/YYYY HH:mm:ss')
                                }
                            },
                            {
                                title: 'สถานะ',
                                data: 'status',
                                render: function (data, type, row) {
                                    if (data == 'รอดำเนินการ') {
                                        return `<span class="border rounded bg-warning text-dark p-1 m-1 text-nowrap"><i class="bi bi-clock"></i> ${data}</span>`
                                    } else {
                                        return `<span class="border rounded bg-success text-light p-1 m-1 text-nowrap"><i class="bi bi-check-circle"></i> ${data}</span>`
                                    }
                                }
                            },
                            { title: 'uid', data: 'uid' },
                            { title: 'รหัสจอง', data: 'booking-id' },
                            { title: 'ชื่อ', data: 'name' },
                            { title: 'เบอร์โทร', data: 'phone' },
                            { title: 'อีเมล', data: 'email' },
                            { title: 'ประเภทสินค้า', data: 'stuff-type' },
                            {
                                title: 'รูปสินค้า',
                                data: 'stuff_img',
                                render: function (data, type, row) {
                                    if (data) {
                                        let url = 'https://lh3.googleusercontent.com/d/' + data.split('/')[5]
                                        return `<img src="${url}" class="img-fluid rounded" style="max-height: 100px;">`
                                    }
                                    else return ''
                                }
                            },
                            { title: 'ประเภทรถ', data: 'truck-sub-type' },
                            { title: 'จำนวนรถ', data: 'truck-num' },
                            { title: 'จุดรับสินค้า', data: 'steps_name' },
                            {
                                title: 'ระยะทาง',
                                data: 'distance',
                                render: function (data, type, row) {
                                    return (data / 1000).toFixed(2) + ' กม.'
                                }
                            },
                            {
                                title: 'ระยะเวลา',
                                data: 'time',
                                render: function (data, type, row) {
                                    return convertTime(data)
                                }
                            },
                            {
                                title: 'ราคา',
                                data: 'price',
                                render: function (data, type, row) {
                                    return data.toLocaleString() + ' บาท'
                                }
                            },
                            { title: 'แรงงาน', data: 'labor-need' },
                            { title: 'จำนวนแรงงาน', data: 'labor-num' },
                            {
                                title: 'ราคาแรงงาน',
                                data: 'labor_price',
                                render: function (data, type, row) {
                                    return data.toLocaleString() + ' บาท'
                                }
                            },
                            {
                                title: 'ราคารวม',
                                data: 'total_price',
                                render: function (data, type, row) {
                                    return data.toLocaleString() + ' บาท'
                                }
                            }

                        ],
                        columnDefs: [
                            { targets: [2, 4, 5, 6, 16], visible: false }
                        ],
                        responsive: true,
                        scrollX: false,
                        dom: 'tip',
                        order: [[0, 'desc']],
                        language: {
                            url: "//cdn.datatables.net/plug-ins/1.10.24/i18n/Thai.json"
                        },
                        initComplete: function (){
                            // set header center
                            $('#booking-table').find('thead').find('th').addClass('text-center')
                        }
                    });


                })
                .on('hidden.bs.modal', function () {
                    $('.modal-body').find('.table-responsive').empty()
                })
            })
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/gasparesganga-jquery-loading-overlay@2.1.7/dist/loadingoverlay.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/compressorjs@1.2.1/dist/compressor.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>

    <!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDfOy3rLSyo58njOYwjcomjSRX8DC5DqI0&callback=initMap"></script> -->
    <script>
        (g => { var h, a, k, p = "The Google Maps JavaScript API", c = "google", l = "importLibrary", q = "__ib__", m = document, b = window; b = b[c] || (b[c] = {}); var d = b.maps || (b.maps = {}), r = new Set, e = new URLSearchParams, u = () => h || (h = new Promise(async (f, n) => { await (a = m.createElement("script")); e.set("libraries", [...r] + ""); for (k in g) e.set(k.replace(/[A-Z]/g, t => "_" + t[0].toLowerCase()), g[k]); e.set("callback", c + ".maps." + q); a.src = `https://maps.${c}apis.com/maps/api/js?` + e; d[q] = f; a.onerror = () => h = n(Error(p + " could not load.")); a.nonce = m.querySelector("script[nonce]")?.nonce || ""; m.head.append(a) })); d[l] ? console.warn(p + " only loads once. Ignoring:", g) : d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n)) })({
            // key: "AIzaSyDfOy3rLSyo58njOYwjcomjSRX8DC5DqI0",
            key: "AIzaSyC4k8VnNFIfIIGhFFVVlo5yvmzrhnblcuE",
            v: "weekly",
            language: "th",
            libraries: "places"

            // Use the 'v' parameter to indicate the version to use (weekly, beta, alpha, etc.).
            // Add other bootstrap parameters as needed, using camel case.
        });
    </script>

</body>

</html>